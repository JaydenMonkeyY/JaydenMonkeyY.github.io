<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Monthly Progress Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    .card {
      background: white;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .btn {
      padding: 8px 12px;
      margin: 4px 0;
      width: 100%;
      border: 1px solid #ccc;
      background: #f0f0f0;
      cursor: pointer;
      border-radius: 8px;
    }
    .btn.active {
      background: #4ade80;
      color: white;
      border: none;
    }
    .textarea, .input {
      width: 100%;
      margin-top: 8px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .tabs button {
      margin-right: 8px;
    }
  </style>
</head>
<body>

  <div class="tabs">
    <button onclick="switchView('daily')">üìÖ Today‚Äôs Plan</button>
    <button onclick="switchView('weekly')">üìÜ Weekly Goals</button>
    <button onclick="switchView('adjust')">‚öôÔ∏è Adjust Plan</button>
  </div>

  <div id="app"></div>

  <script>
    const startDate = new Date("2025-07-01");
    const daysInMonth = 30;

    let defaultTasks = ["Study (30 mins)", "Workout (15‚Äì30 mins)", "Reflection"];
    let weeklyGoals = [
      { title: "Complete 1 full SAT test", description: "Take a full timed SAT practice test using Bluebook or paper. Review all mistakes." },
      { title: "Run 5km under 25 minutes", description: "Attempt one 5K test run this week. Focus on pacing and breathing." },
      { title: "Complete daily tasks 6 out of 7 days", description: "Stay consistent with study, workout, and reflection for at least 6 days." }
    ];

    const tasks = Array.from({ length: daysInMonth }, () => ({
      completed: Array(defaultTasks.length).fill(false),
      notes: ""
    }));

    const today = new Date();
    const todayIndex = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
    let currentView = "daily";

    function formatDate(index) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + index);
      return date.toLocaleDateString("en-US", { month: "short", day: "numeric" });
    }

    function switchView(view) {
      currentView = view;
      render();
    }

    function toggleTask(dayIndex, taskIndex) {
      tasks[dayIndex].completed[taskIndex] = !tasks[dayIndex].completed[taskIndex];
      render();
    }

    function updateNotes(dayIndex, value) {
      tasks[dayIndex].notes = value;
    }

    function updateGoal(index, field, value) {
      weeklyGoals[index][field] = value;
    }

    function updateTaskName(taskIndex, value) {
      defaultTasks[taskIndex] = value;
      render();
    }

    function renderTodayView() {
      const container = document.createElement("div");
      container.className = "card";

      if (todayIndex < 0 || todayIndex >= daysInMonth) {
        container.innerHTML = `<p>Today is outside your 30-day plan (starts July 1).</p>`;
        return container;
      }

      container.innerHTML = `<h2>üìÖ Today‚Äôs Plan (${formatDate(todayIndex)})</h2>`;
      defaultTasks.forEach((task, j) => {
        const isDone = tasks[todayIndex].completed[j];
        const btn = document.createElement("button");
        btn.className = "btn" + (isDone ? " active" : "");
        btn.textContent = isDone ? `‚úÖ Done: ${task}` : `‚¨úÔ∏è ${task}`;
        btn.onclick = () => toggleTask(todayIndex, j);

        const note = document.createElement("textarea");
        note.className = "textarea";
        note.placeholder = `Details for: ${task}`;
        note.value = tasks[todayIndex].notes;
        note.oninput = (e) => updateNotes(todayIndex, e.target.value);

        container.appendChild(btn);
        container.appendChild(note);
      });

      const goalsTitle = document.createElement("h3");
      goalsTitle.innerText = "üìå Weekly Goals";
      container.appendChild(goalsTitle);

      weeklyGoals.forEach(goal => {
        const div = document.createElement("div");
        div.innerHTML = `<strong>‚úÖ ${goal.title}</strong><br/><small>${goal.description}</small>`;
        container.appendChild(div);
      });

      return container;
    }

    function renderWeeklyView() {
      const container = document.createElement("div");
      container.className = "card";
      container.innerHTML = `<h2>üìÜ Weekly Overview</h2>`;

      weeklyGoals.forEach(goal => {
        const div = document.createElement("div");
        div.innerHTML = `<h3>‚úÖ ${goal.title}</h3><p>${goal.description}</p>`;
        container.appendChild(div);
      });

      const todayTasks = document.createElement("div");
      todayTasks.innerHTML = "<h3>üìÖ Today‚Äôs Quick View</h3>";
      defaultTasks.forEach(task => {
        todayTasks.innerHTML += `<p>- ${task}</p>`;
      });

      container.appendChild(todayTasks);
      return container;
    }

    function renderAdjustView() {
      const container = document.createElement("div");

      // === WEEKLY GOALS ===
      const goalCard = document.createElement("div");
      goalCard.className = "card";
      goalCard.innerHTML = `<h3>üõ† Edit Weekly Goals</h3>`;

      weeklyGoals.forEach((goal, i) => {
        const titleInput = document.createElement("input");
        titleInput.className = "input";
        titleInput.value = goal.title;
        titleInput.oninput = (e) => updateGoal(i, "title", e.target.value);

        const descInput = document.createElement("textarea");
        descInput.className = "textarea";
        descInput.value = goal.description;
        descInput.oninput = (e) => updateGoal(i, "description", e.target.value);

        goalCard.appendChild(document.createTextNode(`Goal #${i + 1}:`));
        goalCard.appendChild(titleInput);
        goalCard.appendChild(descInput);
        goalCard.appendChild(document.createElement("hr"));
      });

      container.appendChild(goalCard);

      // === DAILY TASK NAMES ===
      const taskCard = document.createElement("div");
      taskCard.className = "card";
      taskCard.innerHTML = `<h3>üõ† Edit Daily Tasks</h3>`;

      defaultTasks.forEach((task, i) => {
        const input = document.createElement("input");
        input.className = "input";
        input.value = task;
        input.oninput = (e) => updateTaskName(i, e.target.value);
        taskCard.appendChild(document.createTextNode(`Task #${i + 1}:`));
        taskCard.appendChild(input);
      });

      container.appendChild(taskCard);

      // === DAILY PLAN CARDS ===
      tasks.forEach((day, i) => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<h3>${formatDate(i)}</h3>`;

        defaultTasks.forEach((task, j) => {
          const isDone = day.completed[j];
          const btn = document.createElement("button");
          btn.className = "btn" + (isDone ? " active" : "");
          btn.textContent = `${isDone ? "‚úÖ" : "‚¨úÔ∏è"} ${task}`;
          btn.onclick = () => toggleTask(i, j);
          card.appendChild(btn);
        });

        const note = document.createElement("textarea");
        note.className = "textarea";
        note.placeholder = "Reflection / Adjustments / Notes";
        note.value = day.notes;
        note.oninput = (e) => updateNotes(i, e.target.value);
        card.appendChild(note);

        container.appendChild(card);
      });

      return container;
    }

    function render() {
      const app = document.getElementById("app");
      app.innerHTML = "";
      if (currentView === "daily") {
        app.appendChild(renderTodayView());
      } else if (currentView === "weekly") {
        app.appendChild(renderWeeklyView());
      } else {
        app.appendChild(renderAdjustView());
      }
    }

    render();
  </script>
</body>
</html>
